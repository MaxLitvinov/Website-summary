(function (global, factory) {
  'use strict';

  if (typeof exports === 'object' && typeof module !== 'undefined') {
    factory(exports);
  } else if (typeof define === 'function' && define.amd) {
    define(['exports'], factory);
  } else {
    factory(global.ityped = {});
  }
})(this, function (exports) {
  function init(element, options) {
    let currentIndex = 0;
    let strings = [];
    let totalStrings = 0;

    // Ініціалізація параметрів
    function setupOptions(opts) {
      const defaults = {
        strings: ['Привіт, світ!', 'і насолоджуйся!'],
        typeSpeed: 100,
        backSpeed: 50,
        backDelay: 500,
        startDelay: 500,
        cursorChar: '|',
        placeholder: false,
        showCursor: true,
        disableBackTyping: false,
        onFinished: () => {},
        loop: true
      };
      return { ...defaults, ...opts };
    }

    // Додавання курсору
    function addCursor(elem, opts) {
      if (opts.showCursor) {
        const cursor = document.createElement('span');
        cursor.classList.add('ityped-cursor');
        cursor.textContent = opts.cursorChar;
        elem.insertAdjacentElement('afterend', cursor);
      }
    }

    // Виведення тексту
    function typeText(text, opts) {
      let charIndex = 0;
      const length = text.length;
      const interval = setInterval(() => {
        if (opts.placeholder) {
          element.placeholder += text[charIndex];
        } else {
          element.textContent += text[charIndex];
        }
        charIndex++;
        if (charIndex === length) {
          clearInterval(interval);
          setTimeout(() => backspace(opts), opts.backDelay);
        }
      }, opts.typeSpeed);
    }

    // Видалення тексту
    function backspace(opts) {
      const text = opts.placeholder ? element.placeholder : element.textContent;
      let charIndex = text.length;
      const interval = setInterval(() => {
        if (opts.placeholder) {
          element.placeholder = element.placeholder.slice(0, -1);
        } else {
          element.textContent = text.slice(0, -1);
        }
        charIndex--;
        if (charIndex === 0) {
          clearInterval(interval);
          nextString(opts);
        }
      }, opts.backSpeed);
    }

    // Перехід до наступного рядка
    function nextString(opts) {
      if (opts.disableBackTyping && currentIndex === totalStrings - 1) {
        opts.onFinished();
        return;
      }
      if (opts.loop || currentIndex < totalStrings - 1) {
        currentIndex = (currentIndex + 1) % totalStrings;
        setTimeout(() => typeText(strings[currentIndex], opts), opts.startDelay);
      } else {
        opts.onFinished();
      }
    }

    // Початок анімації
    function startAnimation(opts) {
      addCursor(element, opts);
      typeText(strings[currentIndex], opts);
    }

    // Ініціалізація
    return function (opts) {
      const settings = setupOptions(opts || {});
      strings = settings.strings;
      totalStrings = strings.length;

      if (typeof element === 'string') {
        element = document.querySelector(element);
      }

      startAnimation(settings);
    };
  }

  // Експорт модуля
  exports.init = init;
  Object.defineProperty(exports, '__esModule', { value: true });
});//# sourceMappingURL=index.min.js.map
